<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>文章详情</title>
</head>
<body>
(一个粗糙的博客详情页，仅供演示前后端分离原理)
<div>{{ article }}</div>
<hr>
<div>
<ul id="comment">
  {% for comment in comment_list %}
    <li>{{ comment }}</li>
  {% endfor %}
</ul>
{#<button onclick="fresh()">刷新评论</button>#}
<button id="fresh">刷新评论</button>

<script>
  // 后台添加一条评论，观察页面变化

  /* 原生的大概长这样（跟本项目无关），http请求，转换格式，操作dom。
  function loadXMLDoc()
{
	var xmlhttp;
	if (window.XMLHttpRequest)
	{
		//  IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码
		xmlhttp=new XMLHttpRequest();
	}
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
		}
	}
	xmlhttp.open("GET","/try/ajax/ajax_info.txt",true);
	xmlhttp.send();
}
function fresh(){
       self.location.reload();
      console.log(1111);
  }
*/
</script>

{#经过jquery封装的ajax形式#}
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
<script>
$("#fresh").click(function(){
  $.ajax({
      type : "get",
      url : 'http://127.0.0.1:5000/article_async/1',
      data : {
          //'page_no':1,
      },
      success:function(date){
          // 成功回调
          console.log(date);
          // json转数组，循环，操作节点
          var jsonObj =  JSON.parse(date)
          $("#comment").empty();    // 删除子节点
          for(var i =0 ;i < jsonObj.length;i++){
            console.log(jsonObj[i]);
            $("#comment").append('<li>'+jsonObj[i]+'</li>')
          }
      },
      error: function() {
         alert("请求失败");
      }
  });
});

</script>
</div>
</body>
</html>